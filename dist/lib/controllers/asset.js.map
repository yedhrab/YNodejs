{"version":3,"sources":["../../../lib/controllers/asset.js"],"names":["asset","data","callback","namespace","__filename","name","assetName","trimmedPath","trim","lenght","debug","Info","Detail","method"],"mappings":";;;;;QAoBgBA,K,GAAAA,K;;AAhBhB;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;AATA;;;;AAoBO,SAASA,KAAT,CAAeC,IAAf,EAAqBC,QAArB,EAA+B;AACpC;AACA,QAAMC,YAAY,0BAAaC,UAAb,EAAyBJ,MAAMK,IAA/B,CAAlB;;AAEA;AACA,MAAI,iCAAgBJ,IAAhB,EAAsB,KAAtB,CAAJ,EAAkC;AAChC;AACA,UAAMK,YAAYL,KAAKM,WAAL,CAAiBC,IAAjB,EAAlB;AACA,QAAIF,UAAUG,MAAV,GAAmB,CAAvB,EAA0B;AACxB,kCAAeH,SAAf,EAA0BN,SAAS;AACjC,YAAIA,KAAJ,EAAW;AACTU,gBAAMP,SAAN,EAAiB,QAAjB,EAA4B,IAAGG,SAAU,6BAAzC;AACAJ,mBAAS,GAAT,EAAcF,KAAd,EAAqB,+BAAkBM,SAAlB,CAArB;AACD,SAHD,MAGO;AACLI,gBAAMP,SAAN,EAAiB,MAAjB,EAA0B,IAAGG,SAAU,0BAAvC;AACA,0CAAgBJ,QAAhB;AACD;AACF,OARD;AASD;AACF,GAdD,MAcO;AACLQ,UAAMP,SAAN,EAAiB,OAAjB,EAA2B,IAAGF,IAAK,sCAAnC;AACAC,aACE,GADF,EAEE;AACES,YAAM,kCADR;AAEEC,cAAS,UAASX,KAAKY,MAAO,KAAIZ,KAAKM,WAAY;AAFrD,KAFF,EAME,MANF;AAQD;AACF","file":"asset.js","sourcesContent":["/*\r\n * Statik veri işleyicileri\r\n */\r\n\r\nimport { checkDataMethod } from \"../utils/regulators\";\r\nimport { getStaticAsset, figureContentType } from \"../utils/assets\";\r\nimport { getNotFoundPage } from \"../utils/templates\";\r\nimport { getNamespace } from \"../utils/common\";\r\n\r\n/**\r\n * Örnek: localhost:3000/indeks yazıldığında bu fonksiyon çalışır.\r\n *\r\n * Not: ornek, yönlendirici 'nin bir objesidir.\r\n *\r\n * @param {object} data Index.js'te tanımlanan veri objesidir. İstekle gelir.\r\n * @param {function(number, string, string):void} callback İşlemler bittiği zaman verilen yanıt\r\n ** arg0: HTTP varsayılan durum kodları\r\n ** arg0: HTTP yanıtı veya tanımsızlık\r\n ** arg1: İçerik tipi (Content-type) [http, json vs.]\r\n */\r\nexport function asset(data, callback) {\r\n  // Debug metni\r\n  const namespace = getNamespace(__filename, asset.name);\r\n\r\n  // Sadece get metodu ile çalışır\r\n  if (checkDataMethod(data, \"get\")) {\r\n    // İstenilen dosya ismini kırpılmış yoldan alma\r\n    const assetName = data.trimmedPath.trim();\r\n    if (assetName.lenght > 0) { \r\n      getStaticAsset(assetName, asset => {\r\n        if (asset) {\r\n          debug(namespace, \"succes\", `'${assetName}' için sayfa alımı başarılı`);\r\n          callback(200, asset, figureContentType(assetName));\r\n        } else {\r\n          debug(namespace, \"warn\", `'${assetName}' için kaynak bulunamadı`);\r\n          getNotFoundPage(callback);\r\n        }\r\n      })\r\n    }\r\n  } else {\r\n    debug(namespace, \"error\", `'${data}' isteği ile gelen metot 'get' değil`);\r\n    callback(\r\n      405,\r\n      {\r\n        Info: \"İstekle gelen metot hatalıdır :(\",\r\n        Detail: `Metot: ${data.method} /${data.trimmedPath}`\r\n      },\r\n      \"json\"\r\n    );\r\n  }\r\n}\r\n"]}